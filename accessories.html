<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bobby Black Exclusive | Accessories</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{--bg:#fafafa;--text:#111;--muted:#666;--card:#fff;--border:#eaeaea;--shadow:0 10px 28px rgba(0,0,0,.10);}
    *{box-sizing:border-box}
    body{font-family:Arial,sans-serif;margin:0;background:var(--bg);color:var(--text)}
    header{text-align:center;padding:26px 16px 12px}
    .brand-logo{max-width:260px;width:72%;margin:0 auto;display:block}
    .subtitle{margin-top:10px;font-size:13px;letter-spacing:2px;text-transform:uppercase;color:var(--muted)}
    .wrap{max-width:1100px;margin:0 auto;padding:16px 16px 46px}
    .back{display:inline-block;margin-bottom:16px;text-decoration:none;font-weight:900;color:#111}

    .group{margin-bottom:36px}
    .group-title{
      font-size:18px;font-weight:900;margin-bottom:10px;
      border-bottom:2px solid #111;display:inline-block;padding-bottom:4px
    }

    .item{
      background:var(--card);
      border:1px solid var(--border);
      box-shadow:var(--shadow);
      border-radius:14px;
      padding:14px;
      margin-top:12px;
    }

    .item-name{font-weight:900;font-size:16px}
    .sale{color:#b00000;font-weight:900;margin-left:6px;font-size:13px}

    .meta{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px;font-size:13px}
    .pill{background:#f4f4f4;border:1px solid #eee;border-radius:999px;padding:6px 10px}

    .actions-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{border:0;border-radius:999px;padding:10px 14px;font-weight:900;cursor:pointer}
    .btn.add{background:#111;color:#fff}

    footer{text-align:center;padding:18px;font-size:14px;color:var(--muted)}

    /* Age gate */
    .age-gate{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.72);display:none;align-items:center;justify-content:center;padding:20px}
    .age-gate.show{display:flex}
    .age-card{background:#fff;max-width:420px;width:100%;border-radius:18px;padding:22px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.35)}
    .age-title{font-size:22px;font-weight:900;margin-bottom:8px}
    .age-actions{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:16px}
    .age-btn{border:0;border-radius:999px;padding:12px;font-weight:900;cursor:pointer}
    .age-btn.yes{background:#111;color:#fff}
    .age-btn.no{background:#eee;color:#111}

    @media(max-width:700px){.brand-logo{width:86%}}
  </style>

  <script src="cart.js"></script>
</head>

<body>

<!-- Age Gate -->
<div id="ageGate" class="age-gate">
  <div class="age-card">
    <div class="age-title">21+ Only</div>
    <p>Please confirm you are 21 years of age or older.</p>
    <div class="age-actions">
      <button class="age-btn yes" id="ageYes">I‚Äôm 21+</button>
      <button class="age-btn no" id="ageNo">No</button>
    </div>
  </div>
</div>

<header>
  <img src="images/Bobbyb.png" class="brand-logo" alt="Bobby Black Exclusive" />
  <div class="subtitle">Accessories Menu</div>
</header>

<div class="wrap">
  <a href="index.html" class="back">‚Üê Back to Menu</a>
  <div id="menu"></div>
</div>

<footer>Updated Weekly ‚Ä¢ 21+</footer>

<script>
  BBE_CART.mountCartPill();

  // Age gate
  (function(){
    const KEY="bbe_age_verified";
    const gate=document.getElementById("ageGate");
    if(localStorage.getItem(KEY)!=="true"){gate.classList.add("show")}
    document.getElementById("ageYes").onclick=()=>{localStorage.setItem(KEY,"true");gate.classList.remove("show")}
    document.getElementById("ageNo").onclick=()=>{window.location.href="https://www.google.com"}
  })();

  function money(n){ return "$"+Number(n).toFixed(0) }

  fetch("content/products.json",{cache:"no-store"})
    .then(r=>r.json())
    .then(data=>{
      const items=(data.items||[]).filter(i=>i.category==="Accessories");
      const groups={};

      items.forEach(i=>{
        const key=i.subcategory||"Other";
        if(!groups[key]) groups[key]=[];
        groups[key].push(i);
      });

      const container=document.getElementById("menu");
      container.innerHTML="";

      Object.keys(groups).forEach(groupName=>{
        const group=document.createElement("div");
        group.className="group";

        const title=document.createElement("div");
        title.className="group-title";
        title.textContent=groupName;
        group.appendChild(title);

        groups[groupName].forEach(item=>{
          const div=document.createElement("div");
          div.className="item";

          const name=document.createElement("div");
          name.className="item-name";
          name.textContent=item.name;

          if(item.sale){
            const s=document.createElement("span");
            s.className="sale";
            s.textContent="üö® SALE";
            name.appendChild(s);
          }
          div.appendChild(name);

          const meta=document.createElement("div");
          meta.className="meta";

          const single=item.prices?.single;
          const pricePill=document.createElement("span");
          pricePill.className="pill";
          pricePill.textContent="Price: " + (single ? money(single) : "N/A");
          meta.appendChild(pricePill);

          div.appendChild(meta);

          const actions=document.createElement("div");
          actions.className="actions-row";

          const addBtn=document.createElement("button");
          addBtn.className="btn add";
          addBtn.type="button";
          addBtn.textContent="Add";
          addBtn.onclick=(e)=>{
            e.stopPropagation();
            BBE_CART.openAddFlow(item.id, "content/products.json");
          };

          actions.appendChild(addBtn);
          div.appendChild(actions);

          group.appendChild(div);
        });

        container.appendChild(group);
      });
    });
</script>

</body>
</html>
